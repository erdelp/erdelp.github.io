<!DOCTYPE html>
<html>

<head>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<style>
		body {
			background-color: #1a1a1a;
			color: #ffffff;
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
			transition: background-color 0.5s ease;
		}

		body.danger-zone {
			background-color: #ff6b6b;
		}

		body.safe-zone {
			background-color: #49ff53;
		}

		h2,
		h3 {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
			font-weight: 600;
		}

		.card {
			max-width: 600px;
			margin: 20px auto;
			padding: 20px;
			border: 1px solid #333;
			border-radius: 8px;
			background-color: #2d2d2d;
		}

		.input-group {
			margin: 10px 0;
		}

		.label {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
			font-weight: 500;
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
			color: #ffffff;
		}

		.input {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
			width: 100%;
			padding: 8px;
			margin-bottom: 10px;
			background-color: #3d3d3d;
			border: 1px solid #444;
			color: #ffffff;
			border-radius: 4px;
		}

		.input:focus {
			outline: none;
			border-color: #666;
		}

		.results {
			margin-top: 20px;
		}

		.danger {
			color: #ff6b6b;
			font-weight: bold;
		}

		.safe {
			color: #4ade80;
			font-weight: bold;
		}

		.logo {
			font-size: 2.5rem;
			text-align: center;
			margin-bottom: 0.5rem;
			animation: pulse 2s infinite;
		}
		.logo-container {
    position: relative;
    height: 100px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 1rem;
}

.logo-42 {
    height: 50px;
    width: auto;
    position: relative;
    transition: all 0.5s ease;
}

.blackhole {
    font-size: 3rem;
    position: absolute;
    opacity: 0;
    transition: opacity 0.5s ease;
}

/* Danger animation */
.danger-zone .logo-42 {
    animation: fallIntoHole 2s infinite;
}

.danger-zone .blackhole {
    opacity: 1;
}

/* Safe state */
.safe-zone .blackhole {
    opacity: 0;
}

.safe-zone .logo-42 {
    transform: scale(1.1);
}


@keyframes fallIntoHole {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(20px) scale(0.8); }
    100% { transform: translateY(40px) scale(0.5); }
}

		@keyframes pulse {
			0% {
				transform: scale(1);
			}

			50% {
				transform: scale(1.1);
			}

			100% {
				transform: scale(1);
			}
		}

		table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 20px;
		}

		th,
		td {
			border: 1px solid #444;
			padding: 8px;
			text-align: center;
		}

		th {
			background-color: #3d3d3d;
		}

		/* Dark mode styles for date input */
		input[type="date"]::-webkit-calendar-picker-indicator {
			filter: invert(1);
		}
	</style>
</head>

<body>
	<div class="card">
		<div class="logo-container">
			<img src="./logo/42_Logo.svg.png" alt="42 Logo" class="logo-42" />
			<div class="blackhole">âš«</div>
		</div>
		<h2>Blackhole Calculator</h2>

		<div class="input-group">
			<label class="label">Start Date:</label>
			<input type="date" id="startDate" class="input">
		</div>

		<div class="input-group">
			<label class="label">Current Milestone:</label>
			<input type="number" id="milestone" class="input" min="0" max="6">
		</div>

		<div class="input-group">
			<label class="label">Freeze Days:</label>
			<input type="number" id="freezeDays" class="input" value="0" min="0">
		</div>

		<div id="results" class="results"></div>

		<div>
			<h3>Pace 24 Reference</h3>
			<table id="referenceTable">
				<tr>
					<th>Milestone</th>
					<th>Days at Pace 24</th>
				</tr>
			</table>
		</div>
	</div>

	<script>
		function formatDateEU(date) {
			return date.toLocaleDateString('en-GB', {
				day: '2-digit',
				month: '2-digit',
				year: 'numeric'
			});
		}

		const milestoneData = [
			{ milestone: 0, days: 45 },
			{ milestone: 1, days: 118 },
			{ milestone: 2, days: 178 },
			{ milestone: 3, days: 306 },
			{ milestone: 4, days: 447 },
			{ milestone: 5, days: 644 },
			{ milestone: 6, days: 730 }
		];

		const WARNING_THRESHOLD = 14;

		function calculateBlackhole() {
			const startDate = document.getElementById('startDate').value;
			const milestone = parseInt(document.getElementById('milestone').value);
			const freezeDays = parseInt(document.getElementById('freezeDays').value) || 0;

			if (!startDate || isNaN(milestone) || milestone < 0 || milestone > 6) {
				document.getElementById('results').innerHTML = '';
				return;
			}

			const start = new Date(startDate);
			const today = new Date();
			const targetData = milestoneData.find(m => m.milestone === milestone);

			const deadlineDate = new Date(startDate);
			deadlineDate.setDate(deadlineDate.getDate() + targetData.days + freezeDays);

			const daysRemaining = Math.floor((deadlineDate - today) / (1000 * 60 * 60 * 24));
			const isOverdue = daysRemaining < 0;
			const isInDanger = daysRemaining < WARNING_THRESHOLD && daysRemaining >= 0;

			const originalDeadline = new Date(startDate);
			originalDeadline.setDate(originalDeadline.getDate() + targetData.days);


			let resultHTML = `
				<p> <strong>Original Deadline:</strong> ${formatDateEU(originalDeadline)}</p>
    			<p><strong>Days Remaining:</strong>
       				<span class="${isOverdue || isInDanger ? 'danger' : 'safe'}">
           					 ${isOverdue ? `OVERDUE by ${Math.abs(daysRemaining)} days` : `${daysRemaining} days`}
      				</span>
    			</p>
   				<p><strong>Final Deadline (with freeze):</strong>
        			<span class="${isOverdue || isInDanger ? 'danger' : 'safe'}">
						${formatDateEU(deadlineDate)}
					</span>
    				</p>`;
			const body = document.body;
			body.classList.remove('danger-zone', 'safe-zone');

			if (isOverdue || isInDanger) {
				body.classList.add('danger-zone');
			} else if (daysRemaining > WARNING_THRESHOLD) {
				body.classList.add('safe-zone');
			}
			document.getElementById('results').innerHTML = resultHTML;
		}

		// Populate reference table
		const table = document.getElementById('referenceTable');
		milestoneData.forEach(data => {
			const row = table.insertRow();
			row.insertCell(0).textContent = data.milestone;
			row.insertCell(1).textContent = data.days;
		});

		// Add event listeners
		document.getElementById('startDate').addEventListener('change', calculateBlackhole);
		document.getElementById('milestone').addEventListener('input', calculateBlackhole);
		document.getElementById('freezeDays').addEventListener('input', calculateBlackhole);
	</script>
</body>

</html>